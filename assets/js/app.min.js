/*!
app.js
(c) 2020 IG PROG, www.igprog.hr
*/
angular.module("app", ["ngStorage", "pascalprecht.translate", "ngMaterial"]).config(["$httpProvider", "$translateProvider", "$translatePartialLoaderProvider", (e, t, a) => { t.useLoader("$translatePartialLoader", { urlTemplate: "../assets/json/translations/{lang}/{part}.json" }), t.preferredLanguage("hr"), a.addPart("main"), t.useSanitizeValueStrategy("escape"), e.defaults.headers.get || (e.defaults.headers.get = {}), e.defaults.headers.get["If-Modified-Since"] = "Mon, 26 Jul 1997 05:00:00 GMT", e.defaults.headers.get["Cache-Control"] = "no-cache", e.defaults.headers.get.Pragma = "no-cache" }]).factory("f", ["$http", e=>({ post: (t, a, r) =>e({ url: "../" + t + ".asmx/" + a, method: "POST", data: r }).then(e=>JSON.parse(e.data.d), e=>e.data.d), setDate: e=> { var t = e.getDate(); t = t < 10 ? "0" + t : t; var a = e.getMonth(); return a = a + 1 < 10 ? "0" + (a + 1) : a + 1, e.getFullYear() + "-" + a + "-" + t } })]).controller("appCtrl", ["$scope", "$http", "$rootScope", "f", "$sessionStorage", "$translate", "$translatePartialLoader", "$anchorScroll", "$location", function (e, t, a, r, l, n, o, i, s) { location.search.split("&"); e.d = { loading: !1, records: [], info: null, mainGallery: null, services: [] }; var c = t=> { e.d.loading = !0, r.post("Products", "Load", { lang: t }).then(t=> { e.d.records = t, e.d.loading = !1 }) }, d = e=> { r.post("Info", "Load", { lang: e }).then(e=> { a.info = e }) }; r.post("Info", "LoadMainGellery", {}).then(t=> { e.d.mainGallery = t }); var g = () => { r.post("Options", "Load", { type: "services" }).then(t=> { e.d.services = t }) }, p = () => { c(a.lang), d(a.lang), g() }; t.get("../config/config.json").then(function (t) { a.config = t.data, l.config = t.data, l.lang = t.data.lang.code, a.lang = l.lang; var r = location.search; if ("" !== r) { var i = r.split("&"); 1 == i.length && (l.lang = i[0].substring(6, 8), a.lang = l.lang, n.use(l.lang), o.addPart("main")) } "undefined" != typeof Storage ? localStorage.version ? localStorage.version !== e.config.version ? (localStorage.version = e.config.version, window.location.reload(!0), p()) : p() : (localStorage.version = e.config.version, p()) : p() }), e.setLang = function (e) { a.config.lang = e, l.lang = e.code, a.lang = l.lang, n.use(e.code), o.addPart("main"), c(e.code), d(e.code), g() }, e.goto = function (e) { var t = "section" + e; s.hash() !== t ? s.hash("section" + e) : i() } }]).controller("detailsCtrl", ["$scope", "$http", "$rootScope", "f", "$sessionStorage", "$translate", function (e, t, a, r, l, n) { var o = location.search.split("&"), i = null; e.lang = l.lang, e.loading = !1, o.length > 0 && ("id" === o[0].substring(1, 3) && (i = o[0].substring(4)), o.length > 1 && "lang" === o[1].substring(0, 4) && (e.lang = o[1].substring(5, 7), n.use(e.lang))); (t=> { if (null == t) return !1; e.loading = !0, r.post("Products", "Get", { id: t, lang: e.lang }).then(t=> { e.d = t, e.loading = !1 }) })(i) }]).controller("contactCtrl", ["$scope", "$http", "$rootScope", "f", "$translate", function (e, t, a, r, l) { e.loading = !1; r.post("Contact", "Init", {}).then(t=> { e.d = t }), e.send = function (t) { e.loading = !0, r.post("Contact", "Send", { x: t }).then(t=> { e.d = t, e.loading = !1 }) } }]).directive("detailsDirective", () =>({ restrict: "E", scope: { id: "=", product: "=", shortdesc: "=", longdesc: "=", img: "=", price: "=", gallery: "=", options: "=" }, templateUrl: "../assets/partials/directive/details.html" })).directive("navbarDirective", () =>({ restrict: "E", scope: { site: "=", lang: "=" }, templateUrl: "../assets/partials/directive/navbar.html" })).directive("cardDirective", () =>({ restrict: "E", scope: { id: "=", product: "=", shortdesc: "=", img: "=", link: "=", showdesc: "=", lang: "=" }, templateUrl: "../assets/partials/directive/card.html" })).directive("loadingDirective", () =>({ restrict: "E", scope: { btntitle: "=", loadingtitle: "=", value: "=", pdf: "=", size: "=" }, templateUrl: "../assets/partials/directive/loading.html" })).directive("footerDirective", () =>({ restrict: "E", scope: { sitename: "=" }, templateUrl: "../assets/partials/directive/footer.html", controller: "footerCtrl" })).controller("footerCtrl", ["$scope", "$translate", (e, t) => { e.year = (new Date).getFullYear() }]).directive("galleryDirective", () =>({ restrict: "E", scope: { data: "=" }, templateUrl: "../assets/partials/directive/gallery.html", controller: "galleryCtrl" })).controller("galleryCtrl", ["$scope", "$translate", "$mdDialog", (e, t, a) => { var r = function (e, t, a, r, l) { e.d = r, e.back = (t=> { t > 0 && (e.d.idx = t - 1) }), e.forward = (t=> { t >= 0 && t < e.d.data.gallery.length - 1 && (e.d.idx = t + 1) }), e.cancel = function () { t.cancel() } }; e.openPopup = ((e, t) =>(function (e, t) { if ($(window).innerWidth() < 560) return !1; a.show({ controller: r, templateUrl: "../assets/partials/popup/gallery.html", parent: angular.element(document.body), clickOutsideToClose: !0, d: { data: e, idx: t } }).then(function (e) { }, function () { }) })(e, t)) }]).directive("optionsDirective", () =>({ restrict: "E", scope: { data: "=", datatype: "=" }, templateUrl: "../assets/partials/directive/options.html", controller: "optionsCtrl" })).controller("optionsCtrl", ["$scope", "$translate", (e, t) => { }]).directive("servicesDirective", () =>({ restrict: "E", scope: { data: "=" }, templateUrl: "../assets/partials/directive/services.html" })).directive("allowOnlyNumbers", function () { return { restrict: "A", link: function (e, t, a, r) { t.on("keydown", function (e) { var t = $(this), a = t.val(); return a = a.replace(",", "."), t.val(a), 64 != e.which && 16 != e.which && (e.which >= 48 && e.which <= 57 || (e.which >= 96 && e.which <= 105 || ([8, 13, 27, 37, 38, 39, 40].indexOf(e.which) > -1 || (110 == e.which || 188 == e.which || 190 == e.which || (46 == e.which || (e.preventDefault(), !1)))))) }) } } });